(function(g){function k(a,f,b,c,h,i,d){a.style[f]=c<d?"0px":c-d<=h?Math.max(0,i-d)+"px":c-d>=i?Math.max(0,i-d)+"px":c-2*d+"px";return a["offset"+b]}var b=function(a){return parseFloat(a)||0};g.BorderBox=function(a,b){a.style.behavior="none";new g.BorderBox.Item(a,b)};g.BorderBoxWidth=function(a){return BorderBox(a,"width")};g.BorderBoxHeight=function(a){return BorderBox(a,"height")};g.BorderBox.Item=function(a,f){this.lockWidth=this.lockHeight=!1;f&&"width"==f?(this.lockHeight=!0,this.lockWidth=!1):
    f&&"height"==f&&(this.lockWidth=!0,this.lockHeight=!1);this.setPixelsInStyle(a);var e=this,c=a.currentStyle;this.el=a;this.oMnW=b(c.minWidth);this.oMnH=b(c.minHeight);this.lockWidth||(a.style.minWidth=0);this.lockHeight||(a.style.minHeight=0);this.oMxW=b(c.maxWidth)||Infinity;this.oMxH=b(c.maxHeight)||Infinity;this.lockWidth||(a.style.maxWidth="none");this.lockHeight||(a.style.maxHeight="none");this.vGap=(b(this.el.currentStyle.borderTopWidth)+b(this.el.currentStyle.borderBottomWidth)||0)+(b(this.el.currentStyle.paddingTop)+
    b(this.el.currentStyle.paddingBottom)||0);this.hGap=(b(this.el.currentStyle.borderLeftWidth)+b(this.el.currentStyle.borderRightWidth)||0)+(b(this.el.currentStyle.paddingLeft)+b(this.el.currentStyle.paddingRight)||0);this.isLocked=!1;this.oldH=this.oldW=0;this.el.attachEvent("onpropertychange",function(){e.computeSize()});this.computeSize()};g.BorderBox.Item.prototype={computeSize:function(){if(!this.isLocked){this.isLocked=!0;var a=this.el.offsetWidth,b=this.el.offsetHeight;this.oldW!=a&&!this.lockWidth&&
(this.oldW=k(this.el,"width","Width",a,this.oMnW,this.oMxW,this.hGap));this.oldH!=b&&!this.lockHeight&&(this.oldH=k(this.el,"height","Height",b,this.oMnH,this.oMxH,this.vGap));this.isLocked=!1}}};g.getElementFontSize=function(a){if(!a)return 10;var f=a.currentStyle,e=f.fontSize;if(/px/.test(f.fontSize))return b(e);f=a.currentStyle.cssText;return a!=document.body?(a.style.cssText="font-size:1em !important;width:1em !important;padding:0 !important;border:0 !important;position:absolute;behavior:none !important",
    fontSize=a.offsetWidth,a.style.cssText=f,fontSize):/pt/.test(e)?4*parseFloat(e)/3:/em/.test(e)?16*parseFloat(e):/%/.test(e)?16*parseFloat(e)/100:parseFloat(e)};g.BorderBox.Item.prototype.setPixelsInStyle=function(a){var f=/(.)+(em|%)/g,e,c=!1,h=!1,i;for(i in a.currentStyle){var d=""+a.currentStyle[i];if(d&&(e=d.match(f))){for(var g=0,k=e.length;g<k;g++){var j=e[g];"fontSize"==i?(!c&&(c=getElementFontSize(a)),d=c+"px"):/em/.test(j)?(!c&&(c=getElementFontSize(a)),d=d.replace(j,parseFloat(j)*c)):(h||
    (h=a.parentNode,h=(h.offsetWidth-(b(h.currentStyle.paddingLeft)+b(h.currentStyle.paddingRight)||0)-(b(h.currentStyle.borderLeftWidth)+b(h.currentStyle.borderRightWidth)||0))/100),d=d.replace(j,parseFloat(j)*h))}if("width"==i&&this.lockWidth||"height"==i&&this.lockHeight)return;a.style[i]=d}}c&&(a.style.fontSize=c+"px")}})(this);